---
- hosts: localhost
  tasks:
    # https://docs.ansible.com/ansible/latest/collections/ansible/builtin/tempfile_module.html
    - name: Create temporary build directory for generated scripts
      ansible.builtin.tempfile:
        state: directory
        suffix: build

    - name: Create temporary file for generated scripts
      ansible.builtin.tempfile:
        state: file
        suffix: temp
      register: tempfile_1
    # TODO Execute commands from file generated by a template
    - name: Script to copy public key
      connection: local
      template:
        src: ssh-copy-id.j2
        dest: "ssh-copy-ids.sh"